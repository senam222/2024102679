<!DOCTYPE html>
<html lang="ko">
<head>
 <meta charset="UTF-8">
 <meta name="viewport" content="width=device-width, initial-scale=1.0">
 <title>ì‹¤ì‹œê°„ í™˜ìœ¨ ë³€í™˜ ì§€ë„</title>
 <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
 <style>
 body {
 font-family: 'Arial', sans-serif;
 margin: 0;
 padding: 20px;
 background-color: #f5f5f5;
 }

 .container {
 max-width: 1400px;
 margin: 0 auto;
 background: white;
 border-radius: 10px;
 box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
 overflow: hidden;
 }

 .header {
 background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
 color: white;
 padding: 20px;
 text-align: center;
 }

 .header h1 {
 margin: 0;
 font-size: 28px;
 }

 .header p {
 margin: 10px 0 0 0;
 opacity: 0.9;
 }

 .map-container {
 position: relative;
 padding: 20px;
 min-height: 600px;
 }

 #geochart {
 width: 100%;
 height: 600px;
 }

 .currency-input {
 position: absolute;
 background: white;
 border: 2px solid #e2e8f0;
 border-radius: 6px;
 padding: 4px;
 width: 70px;
 box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
 z-index: 1000;
 transition: all 0.3s ease;
 }

 .currency-input.active {
 border-color: #f56500;
 box-shadow: 0 4px 12px rgba(245, 101, 0, 0.3);
 transform: scale(1.1);
 background: #fff7ed;
 }

 .currency-input.target {
 border-color: #48bb78;
 box-shadow: 0 2px 8px rgba(72, 187, 120, 0.2);
 background: #f0fff4;
 }

 .currency-input.hover {
 border-color: #9f7aea;
 box-shadow: 0 3px 10px rgba(159, 122, 234, 0.3);
 transform: scale(1.05);
 background: #faf5ff;
 }

 .currency-input .country-label {
 font-size: 9px;
 font-weight: bold;
 color: #667eea;
 margin-bottom: 2px;
 text-align: center;
 line-height: 1;
 }

 .currency-input input {
 width: 100%;
 padding: 2px;
 border: 1px solid #e2e8f0;
 border-radius: 3px;
 font-size: 10px;
 text-align: center;
 box-sizing: border-box;
 }

 .currency-input input:focus {
 outline: none;
 border-color: #667eea;
 box-shadow: 0 0 0 1px rgba(102, 126, 234, 0.3);
 }

 .currency-input .currency-code {
 font-size: 7px;
 color: #718096;
 text-align: center;
 margin-top: 1px;
 line-height: 1;
 }

 .status-panel {
 position: absolute;
 top: 20px;
 left: 20px;
 background: white;
 border: 2px solid #48bb78;
 border-radius: 8px;
 padding: 15px;
 box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
 z-index: 1001;
 min-width: 200px;
 }

 .status-panel h4 {
 margin: 0 0 10px 0;
 color: #48bb78;
 font-size: 14px;
 }

 .api-status {
 font-size: 11px;
 color: #666;
 margin-top: 8px;
 padding: 5px;
 background: #f8f9fa;
 border-radius: 4px;
 }

 .loading { color: #f56500; }
 .success { color: #38a169; }
 .error { color: #e53e3e; }

 .instruction {
 margin-top: 20px;
 padding: 15px;
 background: #e8f2ff;
 border-radius: 5px;
 text-align: center;
 color: #2c5282;
 }
 </style>
</head>
<body>
 <div class="container">
 <div class="header">
 <h1>ğŸŒ ì‹¤ì‹œê°„ ë‹¤êµ­ê°€ í™˜ìœ¨ ë³€í™˜</h1>
 <p>í•œ êµ­ê°€ì— ê¸ˆì•¡ì„ ì…ë ¥í•˜ë©´ ëª¨ë“  êµ­ê°€ì˜ í™˜ìœ¨ì´ ìë™ ê³„ì‚°ë©ë‹ˆë‹¤</p>
 </div>

 <div class="map-container">
 <div id="geochart"></div>

 <div class="status-panel">
 <h4>ğŸ’¡ ì‚¬ìš©ë²•</h4>
 <div style="font-size: 12px; line-height: 1.4;">
 í…ìŠ¤íŠ¸ë°•ìŠ¤ë¥¼ í´ë¦­í•˜ê³ <br>
 ê¸ˆì•¡ì„ ì…ë ¥í•´ë³´ì„¸ìš”!
 </div>
 <div class="api-status" id="apiStatus">
 ğŸ”„ ì‹¤ì‹œê°„ í™˜ìœ¨ ë¡œë”© ì¤‘...
 </div>
 </div>

 <div class="instruction">
 <strong>ğŸ’° ì‹¤ì‹œê°„ í™˜ìœ¨ ë³€í™˜:</strong>
 í•œ êµ­ê°€ì— ê¸ˆì•¡ì„ ì…ë ¥í•˜ë©´ ë‹¤ë¥¸ ëª¨ë“  êµ­ê°€ì— ìë™ìœ¼ë¡œ í™˜ì „ëœ ê¸ˆì•¡ì´ í‘œì‹œë©ë‹ˆë‹¤
 <br><small style="color: #666; margin-top: 5px; display: block;">
 ğŸ”„ í™˜ìœ¨ì€ 5ë¶„ë§ˆë‹¤ ìë™ ì—…ë°ì´íŠ¸ë©ë‹ˆë‹¤
 </small>
 </div>
 </div>
 </div>

 <script type="text/javascript">
 // êµ­ê°€ë³„ ì •ë³´ ë° ìƒ‰ìƒ (ì™„ì „íˆ ìˆ˜ì •ëœ ë²„ì „)
 const countryData = {
 'US': {
 name: 'ë¯¸êµ­', currency: 'USD', symbol: '$',
 position: { top: '45%', left: '18%' }, color: 1
 },
 'KR': {
 name: 'í•œêµ­', currency: 'KRW', symbol: 'â‚©',
 position: { top: '35%', left: '82%' }, color: 2
 },
 'JP': {
 name: 'ì¼ë³¸', currency: 'JPY', symbol: 'Â¥',
 position: { top: '30%', left: '87%' }, color: 3
 },
 'CN': {
 name: 'ì¤‘êµ­', currency: 'CNY', symbol: 'Â¥',
 position: { top: '38%', left: '72%' }, color: 4
 },
 'GB': {
 name: 'ì˜êµ­', currency: 'GBP', symbol: 'Â£',
 position: { top: '22%', left: '48%' }, color: 5
 },
 'DE': {
 name: 'ë…ì¼', currency: 'EUR', symbol: 'â‚¬',
 position: { top: '25%', left: '52%' }, color: 6
 },
 'FR': {
 name: 'í”„ë‘ìŠ¤', currency: 'EUR', symbol: 'â‚¬',
 position: { top: '32%', left: '50%' }, color: 7
 },
 'CA': {
 name: 'ìºë‚˜ë‹¤', currency: 'CAD', symbol: 'C$',
 position: { top: '30%', left: '22%' }, color: 8
 },
 'AU': {
 name: 'í˜¸ì£¼', currency: 'AUD', symbol: 'A$',
 position: { top: '70%', left: '80%' }, color: 9
 },
 'IN': {
 name: 'ì¸ë„', currency: 'INR', symbol: 'â‚¹',
 position: { top: '45%', left: '68%' }, color: 10
 },
 'BR': {
 name: 'ë¸Œë¼ì§ˆ', currency: 'BRL', symbol: 'R$',
 position: { top: '55%', left: '30%' }, color: 11
 },
 'RU': {
 name: 'ëŸ¬ì‹œì•„', currency: 'RUB', symbol: 'â‚½',
 position: { top: '20%', left: '65%' }, color: 12
 }
 };

 // í™˜ìœ¨ ë°ì´í„° (ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸ë¨)
 let exchangeRates = {
 'USD': 1330, 'KRW': 1, 'JPY': 9.8, 'CNY': 185,
 'GBP': 1680, 'EUR': 1450, 'CAD': 980, 'AUD': 890,
 'INR': 16, 'BRL': 270, 'RUB': 14
 };

 let activeCountry = null;

 // Google Charts ë¡œë“œ
 google.charts.load('current', {
 'packages': ['geochart'],
 'mapsApiKey': 'AIzaSyD-9tSrke72PouQMnMX-a7eZSW0jkFMBWY'
 });
 google.charts.setOnLoadCallback(initializeMap);

 function initializeMap() {
 drawMap();
 createCurrencyInputs();
 startRateUpdates();
 }

 function drawMap() {
 const data = google.visualization.arrayToDataTable([
 ['Country', 'Value'],
 ...Object.entries(countryData).map(([code, info]) => [code, info.color])
 ]);

 const options = {
 legend: 'none',
 colorAxis: {
 legend: { position: 'none' },
 colors: [
 '#FF4444', // ë¹¨ê°„ìƒ‰
 '#44FF44', // ì´ˆë¡ìƒ‰
 '#4444FF', // íŒŒë€ìƒ‰
 '#FFFF44', // ë…¸ë€ìƒ‰
 '#FF44FF', // ë§ˆì  íƒ€
 '#44FFFF', // ì²­ë¡ìƒ‰
 '#FF8844', // ì£¼í™©ìƒ‰
 '#8844FF', // ë³´ë¼ìƒ‰
 '#FF4488', // í•‘í¬ìƒ‰
 '#88FF44', // ë¼ì„ìƒ‰
 '#4488FF', // í•˜ëŠ˜ìƒ‰
 '#FF8888' // ì—°ë¹¨ê°„ìƒ‰
 ]
 },
 backgroundColor: '#f8fafc',
 datalessRegionColor: '#f1f5f9',
 defaultColor: '#e2e8f0',
 width: '100%',
 height: '600',
 tooltip: { trigger: 'none' }
 };

 const chart = new google.visualization.GeoChart(document.getElementById('geochart'));

 // ì§€ë„ êµ­ê°€ì— ë§ˆìš°ìŠ¤ í˜¸ë²„ ì´ë²¤íŠ¸ ì¶”ê°€
 google.visualization.events.addListener(chart, 'onmouseover', function(e) {
 const countries = Object.keys(countryData);
 if (e.row !== null && e.row < countries.length) {
 const countryCode = countries[e.row];
 highlightFromMap(countryCode);
 }
 });

 google.visualization.events.addListener(chart, 'onmouseout', function(e) {
 clearMapHighlight();
 });

 chart.draw(data, options);
 }

 function createCurrencyInputs() {
 const mapContainer = document.querySelector('.map-container');

 Object.entries(countryData).forEach(([code, info]) => {
 const inputDiv = document.createElement('div');
 inputDiv.className = 'currency-input';
 inputDiv.id = `container-${code}`;
 inputDiv.style.top = info.position.top;
 inputDiv.style.left = info.position.left;
 inputDiv.innerHTML = `
 <div class="country-label">${info.name}</div>
 <input type="number"
 id="input-${code}"
 placeholder="0"
 step="0.01"
 oninput="convertAllCurrencies('${code}', this.value)"
 onfocus="highlightCountry('${code}')"
 onblur="clearHighlight()">
 <div class="currency-code">${info.currency}</div>
 `;
 mapContainer.appendChild(inputDiv);
 });
 }

 function highlightFromMap(countryCode) {
 // ê¸°ì¡´ í˜¸ë²„ íš¨ê³¼ ì œê±°
 clearMapHighlight();

 // í•´ë‹¹ êµ­ê°€ í…ìŠ¤íŠ¸ë°•ìŠ¤ í˜¸ë²„ íš¨ê³¼
 const container = document.getElementById(`container-${countryCode}`);
 if (container) {
 container.classList.add('hover');
 }
 }

 function clearMapHighlight() {
 // í¬ì»¤ìŠ¤ëœ êµ­ê°€ê°€ ì•„ë‹Œ ê²½ìš°ë§Œ í˜¸ë²„ íš¨ê³¼ ì œê±°
 Object.keys(countryData).forEach(code => {
 const container = document.getElementById(`container-${code}`);
 if (container && activeCountry !== code) {
 container.classList.remove('hover');
 }
 });
 }

 function highlightCountry(countryCode) {
 clearHighlight();
 clearMapHighlight();
 activeCountry = countryCode;

 // í™œì„± êµ­ê°€ ê°•ì¡°
 document.getElementById(`container-${countryCode}`).classList.add('active');

 // ë‹¤ë¥¸ êµ­ê°€ë“¤ì„ ëŒ€ìƒìœ¼ë¡œ í‘œì‹œ
 Object.keys(countryData).forEach(code => {
 if (code !== countryCode) {
 document.getElementById(`container-${code}`).classList.add('target');
 }
 });
 }

 function clearHighlight() {
 Object.keys(countryData).forEach(code => {
 const container = document.getElementById(`container-${code}`);
 container.classList.remove('active', 'target', 'hover');
 });
 activeCountry = null;
 }

 function convertAllCurrencies(sourceCountry, sourceAmount) {
 const amount = parseFloat(sourceAmount);

 if (!sourceAmount || isNaN(amount) || amount <= 0) {
 Object.keys(countryData).forEach(code => {
 if (code !== sourceCountry) {
 document.getElementById(`input-${code}`).value = '';
 }
 });
 return;
 }

 const sourceCurrency = countryData[sourceCountry].currency;
 const sourceRate = exchangeRates[sourceCurrency];
 const amountInKRW = amount * sourceRate;

 Object.entries(countryData).forEach(([code, info]) => {
 if (code !== sourceCountry) {
 const targetRate = exchangeRates[info.currency];
 const convertedAmount = amountInKRW / targetRate;

 let decimalPlaces = 2;
 if (info.currency === 'JPY' || info.currency === 'KRW') {
 decimalPlaces = 0;
 } else if (info.currency === 'INR' || info.currency === 'RUB') {
 decimalPlaces = 1;
 }

 document.getElementById(`input-${code}`).value = convertedAmount.toFixed(decimalPlaces);
 }
 });
 }

 // ì‹¤ì‹œê°„ í™˜ìœ¨ API
 async function fetchRealTimeRates() {
 const statusElement = document.getElementById('apiStatus');
 statusElement.innerHTML = 'ğŸ”„ í™˜ìœ¨ ì—…ë°ì´íŠ¸ ì¤‘...';
 statusElement.className = 'api-status loading';

 try {
 // ExchangeRate-API ì‚¬ìš©
 const response = await fetch('https://api.exchangerate-api.com/v4/latest/KRW');

 if (!response.ok) throw new Error('API í˜¸ì¶œ ì‹¤íŒ¨');

 const data = await response.json();

 if (data.rates) {
 const supportedCurrencies = ['USD', 'JPY', 'CNY', 'GBP', 'EUR', 'CAD', 'AUD', 'INR', 'BRL', 'RUB'];

 supportedCurrencies.forEach(currency => {
 if (data.rates[currency]) {
 exchangeRates[currency] = 1 / data.rates[currency];
 }
 });

 const now = new Date();
 statusElement.innerHTML = `âœ… í™˜ìœ¨ ì—…ë°ì´íŠ¸ ì™„ë£Œ<br><small>ì‹œê°„: ${now.toLocaleTimeString('ko-KR')}</small>`;
 statusElement.className = 'api-status success';
 } else {
 throw new Error('í™˜ìœ¨ ë°ì´í„° ì—†ìŒ');
 }

 } catch (error) {
 console.error('í™˜ìœ¨ ì—…ë°ì´íŠ¸ ì‹¤íŒ¨:', error);
 statusElement.innerHTML = `âš ï¸ í™˜ìœ¨ ì—…ë°ì´íŠ¸ ì‹¤íŒ¨<br><small>ê¸°ë³¸ í™˜ìœ¨ ì‚¬ìš©</small>`;
 statusElement.className = 'api-status error';
 }
 }

 function startRateUpdates() {
 fetchRealTimeRates();
 setInterval(fetchRealTimeRates, 5 * 60 * 1000); // 5ë¶„ë§ˆë‹¤
 }
 </script>
</body>
</html
