
 } catch (error) {
 console.error('í™˜ìœ¨ ë³€í™˜ ì˜¤ë¥˜:', error);
 utils.updateStatus('âš ï¸ í™˜ìœ¨ ë³€í™˜ ì‹¤íŒ¨', 'error');
 } finally {
 this.state.isConverting = false;
 }
 }

 clearOtherInputs(excludeCountry) {
 Object.keys(COUNTRIES).forEach(country => {
 if (country !== excludeCountry) {
 const input = document.querySelector(`.input-${country} input`);
 if (input) input.value = '';
 }
 });
 }

 clearAllInputs() {
 document.querySelectorAll('.currency-input input').forEach(input => {
 input.value = '';
 });
 this.state.clearActive();
 }

 async fetchExchangeRates() {
 utils.updateStatus('ğŸ”„ í™˜ìœ¨ ì—…ë°ì´íŠ¸ ì¤‘...', 'loading');

 try {
 const controller = new AbortController();
 const timeoutId = setTimeout(() => controller.abort(), CONFIG.API_TIMEOUT);

 const response = await fetch('https://api.exchangerate-api.com/v4/latest/KRW', {
 signal: controller.signal
 });

 clearTimeout(timeoutId);

 if (!response.ok) {
 throw new Error(`HTTP ${response.status}`);
 }

 const data = await response.json();

 if (data.rates) {
 // í™˜ìœ¨ ì—…ë°ì´íŠ¸
 Object.keys(exchangeRates).forEach(currency => {
 if (data.rates[currency]) {
 exchangeRates[currency] = 1 / data.rates[currency];
 }
 });

 this.state.lastUpdate = new Date();
 const timeString = this.state.lastUpdate.toLocaleTimeString('ko-KR');

 utils.updateStatus(
 `âœ… í™˜ìœ¨ ì—…ë°ì´íŠ¸ ì™„ë£Œ<br><small>ì‹œê°„: ${timeString}</small>`,
 'success'
 );
 } else {
 throw new Error('ì‘ë‹µ ë°ì´í„° ì—†ìŒ');
 }
 } catch (error) {
 console.error('í™˜ìœ¨ API ì˜¤ë¥˜:', error);

 let message = 'âš ï¸ í™˜ìœ¨ ì—…ë°ì´íŠ¸ ì‹¤íŒ¨<br><small>ê¸°ë³¸ í™˜ìœ¨ ì‚¬ìš©</small>';
 if (error.name === 'AbortError') {
 message = 'âš ï¸ ìš”ì²­ ì‹œê°„ ì´ˆê³¼<br><small>ê¸°ë³¸ í™˜ìœ¨ ì‚¬ìš©</small>';
 }

 utils.updateStatus(message, 'error');
 }
 }

 startPeriodicUpdates() {
 // ì£¼ê¸°ì  í™˜ìœ¨ ì—…ë°ì´íŠ¸
 setInterval(() => {
 this.fetchExchangeRates();
 }, CONFIG.UPDATE_INTERVAL);

 // í˜ì´ì§€ ê°€ì‹œì„± API ì‚¬ìš© - íƒ­ì´ í™œì„±í™”ë  ë•Œ ì—…ë°ì´íŠ¸
 document.addEventListener('visibilitychange', () => {
 if (!document.hidden && this.state.lastUpdate) {
 const timeSinceUpdate = Date.now() - this.state.lastUpdate.getTime();
 if (timeSinceUpdate > CONFIG.UPDATE_INTERVAL) {
 this.fetchExchangeRates();
 }
 }
 });
 }
 }

 // ì•± ì´ˆê¸°í™”
 document.addEventListener('DOMContentLoaded', () => {
 new CurrencyConverter();
 });

 // ì „ì—­ ì˜¤ë¥˜ ì²˜ë¦¬
 window.addEventListener('error', (e) => {
 console.error('ì „ì—­ ì˜¤ë¥˜:', e.error);
 utils.updateStatus('âš ï¸ ì• í”Œë¦¬ì¼€ì´ì…˜ ì˜¤ë¥˜ ë°œìƒ', 'error');
 });

 // ì„œë¹„ìŠ¤ ì›Œì»¤ ë“±ë¡ (ì„ íƒì‚¬í•­)
 if ('serviceWorker' in navigator) {
 window.addEventListener('load', () => {
 // í–¥í›„ ì˜¤í”„ë¼ì¸ ì§€ì›ì„ ìœ„í•œ ì„œë¹„ìŠ¤ ì›Œì»¤ ë“±ë¡ ì½”ë“œ
 console.log('ì„œë¹„ìŠ¤ ì›Œì»¤ ì§€ì› ê°€ëŠ¥');
 });
 }
 </script>
</body>
</html>
